{
  
    
        "post0": {
            "title": "KERRY MATRIX 2.0",
            "content": "#collapse #IMPORTING LIBRARIES AND DATA FILES import pandas as pd mat=pd.read_csv(&#39;../us_m.csv&#39;) kerry=pd.read_csv(&#39;../kerry.csv&#39;) rt = pd.read_csv(&#39;https://d14wlfuexuxgcm.cloudfront.net/covid/rt.csv&#39;) da = pd.read_csv(&#39;https://covidtracking.com/api/v1/states/daily.csv&#39;) . . #collapse #FORMATING DATA FROM LAST WEEKS MATRIX TO MOVE WEEKLY DATA OVER mat.columns = map(str.lower, mat.columns) col=[&#39;state&#39;,&#39;social index current&#39;,&#39;rt current&#39;,&#39;test increase current&#39;,&#39;tpr current&#39;, &#39;weekly deaths current&#39;,&#39;total deaths current&#39;,&#39;total tests current&#39;] newCol=mat[col] newerCol=newCol.rename(columns={&#39;social index current&#39;:&#39;social index past&#39; ,&#39;rt current&#39;:&#39;rt past&#39; ,&#39;test increase current&#39;:&#39;test increase past&#39;, &#39;tpr current&#39;:&#39;tpr past&#39;, &#39;weekly deaths current&#39;:&#39;weekly deaths past&#39;, &#39;total deaths current&#39;:&#39;total deaths past&#39;, &#39;total tests current&#39;:&#39;total tests past&#39;}) kerry.columns=map(str.lower, kerry.columns) . . #collapse #CLEANING THE RTLIVE DATA today=&#39;2020-08-03&#39; rtCleaned = rt[rt[&#39;date&#39;]==today] rtColumns = [&#39;date&#39;, &#39;region&#39;, &#39;mean&#39;] rtCleaned = rtCleaned[rtColumns] rtCleaned = rtCleaned.rename(columns = {&#39;region&#39;:&#39;state&#39;}) rtCleaned = rtCleaned.sort_values(&#39;state&#39;, ascending=True) . . #collapse #CLEANING THE DAILY COVID DATA dateRange=&#39;20200803&#39; dailyColumns = [&#39;date&#39;, &#39;state&#39;, &#39;death&#39;, &#39;positiveIncrease&#39;, &#39;totalTestResultsIncrease&#39;, &#39;deathIncrease&#39;] dailyData = da[dailyColumns] dailyData = dailyData.sort_values(&#39;state&#39;, ascending=True) dailyCleaned = dailyData[dailyData[&#39;date&#39;].astype(str)==dateRange] . . #collapse #MERGING THE DATASETS TOGETHER mergef=pd.merge(kerry, rtCleaned, on=&#39;state&#39;) merget=pd.merge(mergef, dailyCleaned, on=&#39;state&#39;) merger=pd.merge(merget, newerCol, on=&#39;state&#39;) . . #SHOW THE LOCATIONS FOR CLIENT kerry . state population . 0 AL | 4903185 | . 1 AR | 3017804 | . 2 CA | 39512223 | . 3 FL | 21477737 | . 4 GA | 10617423 | . 5 IA | 3155070 | . 6 IL | 12671821 | . 7 IN | 6732219 | . 8 KS | 2913314 | . 9 MD | 6045680 | . 10 ME | 1344212 | . 11 MN | 5639632 | . 12 MO | 6137428 | . 13 MS | 2976149 | . 14 NJ | 8882190 | . 15 NY | 19453561 | . 16 OH | 11689100 | . 17 TN | 6829174 | . 18 TX | 28995881 | . 19 VA | 8535519 | . 20 WA | 7614893 | . 21 WI | 5822434 | . #SHOW CLIP OF THE RT DATA rtCleaned.head(3) . date state mean . 8000 2020-08-03 | AK | 1.045968 | . 3675 2020-08-03 | AL | 1.037615 | . 4948 2020-08-03 | AR | 1.032516 | . #SHOW CLIP OF THE DAILY DATA dailyCleaned.head(3) . date state death positiveIncrease totalTestResultsIncrease deathIncrease . 112 20200803 | AK | 25.0 | 80 | 2717 | 1 | . 113 20200803 | AL | 1633.0 | 1217 | 7981 | 6 | . 114 20200803 | AR | 475.0 | 1424 | 12819 | 17 | . #SHOW CLIP OF THE PAST DATA newerCol.head(3) . state social index past rt past test increase past tpr past weekly deaths past total deaths past total tests past . 0 AL | 22 | 1.111944 | 11546 | 21% | 142 | 1633 | 56092 | . 1 AR | 76 | 1.037065 | 5150 | 12% | 67 | 475 | 42509 | . 2 CA | 22 | 0.970088 | 54351 | 6% | 943 | 9388 | 888118 | . #SHOW THE MERGED DATA merger . state population date_x mean date_y death positiveIncrease totalTestResultsIncrease deathIncrease social index past rt past test increase past tpr past weekly deaths past total deaths past total tests past . 0 AL | 4903185 | 2020-08-03 | 1.037615 | 20200803 | 1633.0 | 1217 | 7981 | 6 | 22 | 1.111944 | 11546 | 21% | 142 | 1633 | 56092 | . 1 AR | 3017804 | 2020-08-03 | 1.032516 | 20200803 | 475.0 | 1424 | 12819 | 17 | 76 | 1.037065 | 5150 | 12% | 67 | 475 | 42509 | . 2 CA | 39512223 | 2020-08-03 | 0.887432 | 20200803 | 9388.0 | 5739 | 148721 | 32 | 22 | 0.970088 | 54351 | 6% | 943 | 9388 | 888118 | . 3 FL | 21477737 | 2020-08-03 | 0.965805 | 20200803 | 7279.0 | 4752 | 31801 | 73 | 85 | 0.986019 | 59137 | 18% | 1230 | 7279 | 321301 | . 4 GA | 10617423 | 2020-08-03 | 0.953591 | 20200803 | 3842.0 | 2258 | 21761 | 2 | 22 | 0.953783 | 24592 | 13% | 333 | 3842 | 193438 | . 5 IA | 3155070 | 2020-08-03 | 0.986369 | 20200803 | 882.0 | 349 | 2357 | 6 | 16 | 1.010162 | 3287 | 10% | 49 | 882 | 31630 | . 6 IL | 12671821 | 2020-08-03 | 1.079520 | 20200803 | 7723.0 | 1298 | 28475 | 9 | 44 | 1.092876 | 10625 | 4% | 115 | 7723 | 264702 | . 7 IN | 6732219 | 2020-08-03 | 1.005326 | 20200803 | 2980.0 | 576 | 6439 | 5 | 54 | 1.001587 | 5526 | 8% | 74 | 2980 | 67691 | . 8 KS | 2913314 | 2020-08-03 | 1.062584 | 20200803 | 365.0 | 1064 | 9332 | 7 | 46 | 1.071201 | 2704 | 12% | 30 | 365 | 22903 | . 9 MD | 6045680 | 2020-08-03 | 1.031896 | 20200803 | 3523.0 | 870 | 15851 | 8 | 45 | 1.047616 | 6268 | 6% | 76 | 3523 | 105119 | . 10 ME | 1344212 | 2020-08-03 | 0.935590 | 20200803 | 124.0 | 12 | 2071 | 1 | 45 | 0.975832 | 138 | 1% | 5 | 124 | 16704 | . 11 MN | 5639632 | 2020-08-03 | 1.103790 | 20200803 | 1656.0 | 613 | 13663 | 2 | 45 | 1.074376 | 4757 | -5% | 40 | 1656 | -98722 | . 12 MO | 6137428 | 2020-08-03 | 1.166522 | 20200803 | 1255.0 | 1047 | 10481 | 2 | 1 | 1.220294 | 9837 | 14% | 54 | 1255 | 71044 | . 13 MS | 2976149 | 2020-08-03 | 1.071332 | 20200803 | 1711.0 | 572 | 572 | 8 | 13 | 1.061724 | 8168 | 23% | 210 | 1711 | 35120 | . 14 NJ | 8882190 | 2020-08-03 | 0.975566 | 20200803 | 15846.0 | 264 | 18702 | 10 | 15 | 0.965851 | 2802 | 2% | 42 | 15846 | 180739 | . 15 NY | 19453561 | 2020-08-03 | 0.963728 | 20200803 | 25172.0 | 545 | 51839 | 2 | 52 | 0.941746 | 4499 | 1% | 55 | 25172 | 455625 | . 16 OH | 11689100 | 2020-08-03 | 0.941189 | 20200803 | 3539.0 | 932 | 17997 | 10 | 64 | 0.918456 | 8786 | 5% | 195 | 3539 | 191445 | . 17 TN | 6829174 | 2020-08-03 | 0.986842 | 20200803 | 1092.0 | 1009 | 12235 | 19 | 15 | 0.980140 | 14147 | 9% | 114 | 1092 | 163081 | . 18 TX | 28995881 | 2020-08-03 | 0.957834 | 20200803 | 7016.0 | 11529 | 86807 | 179 | 35 | 0.933380 | 56091 | 14% | 1303 | 7016 | 405704 | . 19 VA | 8535519 | 2020-08-03 | 1.096200 | 20200803 | 2218.0 | 1324 | 15082 | 0 | 85 | 1.023291 | 7034 | 6% | 136 | 2218 | 115897 | . 20 WA | 7614893 | 2020-08-03 | 1.091667 | 20200803 | 1596.0 | 632 | 6752 | 4 | 25 | 1.012360 | 5538 | 6% | 95 | 57 | 88933 | . 21 WI | 5822434 | 2020-08-03 | 0.918711 | 20200803 | 956.0 | 411 | 7180 | 1 | 26 | 0.985503 | 6120 | 7% | 56 | 1596 | 93650 | .",
            "url": "https://richcastro82.github.io/Matrix/jupyter/2020/08/06/Matrix_New.html",
            "relUrl": "/jupyter/2020/08/06/Matrix_New.html",
            "date": " • Aug 6, 2020"
        }
        
    
  
    
        ,"post1": {
            "title": "Title",
            "content": "#collapse # Kelloggs &gt; notebook that creates the kerry datasets. - toc: true - badges: true - comments: true - categories: [jupyter] - image: images/chart-preview.png . . #collapse #IMPORT LIBRARIES FROM PYTHON import pandas as pd #IMPORT DATA SETS FROM TRUSTED SOURCES #US CENSUS DATA FROM - censusData = pd.read_csv(&#39;../_data/cen.csv&#39;) #COUNTY MASK USAGE FROM - maskData = pd.read_csv(&#39;../_data/maskbycounty.csv&#39;) #RT DATA FROM - D=pd.read_csv(&#39;../_data/rttestcounty.csv&#39;) countyData = pd.read_csv(&#39;../_data/isee.csv&#39;) rtData = pd.read_csv(&#39;https://d14wlfuexuxgcm.cloudfront.net/covid/rt.csv&#39;) #CLEAN UP DATA AND STANDARDIZE THE COLUMNS ACol=[ &#39;uid&#39;, &#39;date&#39;, &#39;resolution&#39;, &#39;date_lag&#39;, &#39;Rt_plot&#39;, &#39;Rt_upr&#39;, &#39;Rt_lwr&#39;, &#39;Rt_loess_fit&#39;, &#39;Rt_loess_lwr&#39;, &#39;Rt_loess_upr&#39;, &#39;positiveIncrease&#39;, &#39;positive&#39;, &#39;positive_7day&#39;, &#39;positive_percapita&#39;, &#39;positiveIncr_percapita&#39;, &#39;deathIncrease&#39;, &#39;death&#39;, &#39;death_percapita&#39;, &#39;deathIncr_percapita&#39;] As=countyData[ACol] pCol=[&#39;fips&#39;, &#39;POPESTIMATE2019&#39;] censusDataCleaned=censusData[pCol] . . IMPORTING CLIENT DATA . #KERRY LOCATIONS . #PEPSI LOCATIONS . #KELLOGGS LOCATIONS clientLocations=pd.read_csv(&#39;../_data/kellData3.csv&#39;) fCol=[&#39;uid&#39;, &#39;fips&#39;, &#39;state&#39;, &#39;county&#39;] clientDataCleaned=clientLocations[fCol] . #collapse mergeClientCensus=pd.merge(censusDataCleaned, clientDataCleaned.astype(str), on =&quot;fips&quot;) mergeData=mergeClientCensus.sort_values(&#39;state&#39;) md=pd.merge(mergeData, D.astype(str), on=&#39;fips&#39;) mn=md.sort_values(&#39;state&#39;) UT=pd.merge(mergeData, As.astype(str), on=&#39;uid&#39;) today = &#39;08/01/2020&#39; UTT = UT[UT[&#39;date&#39;]==today] AwA=pd.merge(As.astype(str), mergeData, on=&#39;uid&#39;, ) AwCol=[ &#39;state&#39;, &#39;county&#39;, &#39;date&#39;, &#39;resolution&#39;, &#39;Rt_plot&#39;, &#39;Rt_upr&#39;, &#39;Rt_lwr&#39;, &#39;Rt_loess_fit&#39;, &#39;Rt_loess_lwr&#39;, &#39;Rt_loess_upr&#39;, &#39;positiveIncrease&#39;, &#39;positive&#39;, &#39;positive_7day&#39;, &#39;positive_percapita&#39;, &#39;positiveIncr_percapita&#39;, &#39;deathIncrease&#39;, &#39;death&#39;, &#39;death_percapita&#39;, &#39;deathIncr_percapita&#39;, &#39;POPESTIMATE2019&#39;, &#39;fips&#39; ] AwCleaned = AwA[AwCol] ATT=pd.merge(AwCleaned, maskData.astype(str), on=&#39;fips&#39;) pd.options.display.max_rows = 2800 ATCol=[&#39;state&#39;, &#39;county&#39;, &#39;date&#39;, &#39;Rt_plot&#39;, &#39;positiveIncrease&#39;, &#39;positive&#39;, &#39;positive_7day&#39;, &#39;positive_percapita&#39;, &#39;positiveIncr_percapita&#39;, &#39;deathIncrease&#39;, &#39;death&#39;, &#39;death_percapita&#39;, &#39;deathIncr_percapita&#39;, &#39;POPESTIMATE2019&#39;, &#39;NEVER&#39;, &#39;RARELY&#39;, &#39;SOMETIMES&#39;, &#39;FREQUENTLY&#39;, &#39;ALWAYS&#39;] ATR=ATT[ATCol] ATY = ATR[ATR[&#39;date&#39;]==&#39;7/18/2020&#39;] . . ATY . state county date Rt_plot positiveIncrease positive positive_7day positive_percapita positiveIncr_percapita deathIncrease death death_percapita deathIncr_percapita POPESTIMATE2019 NEVER RARELY SOMETIMES FREQUENTLY ALWAYS . 121 Florida | Hillsborough | 7/18/2020 | 1.126308429 | 13 | 769 | 26.85714286 | 16568.27681 | 280.0879045 | 3 | 10 | 215.45223419999996 | 64.63567027 | 1471968 | 0.064 | 0.10800000000000001 | 0.129 | 0.174 | 0.526 | . 261 Georgia | Floyd | 7/18/2020 | 1.075276473 | 24 | 853 | 19.57142857 | 8660.074316 | 243.65976969999997 | 0 | 15 | 152.2873561 | 0.0 | 10654 | 0.18600000000000003 | 0.036000000000000004 | 0.23399999999999999 | 0.14800000000000002 | 0.395 | . 401 Illinois | Cook | 7/18/2020 | 1.036453145 | 502 | 98292 | 450.57142860000005 | 19084.96179 | 97.47131829 | 9 | 4774 | 926.9483536 | 1.747493754 | 15441 | 0.023 | 0.021 | 0.07200000000000001 | 0.162 | 0.722 | . 541 Tennessee | Madison | 7/18/2020 | -88.0 | 14 | 382 | 9.571428571 | 2227.184477 | 81.624562 | 0 | 15 | 87.45488785 | 0.0 | 53794 | 0.1 | 0.055999999999999994 | 0.129 | 0.33399999999999996 | 0.381 | . 681 Kansas | Wyandotte | 7/18/2020 | 1.216184503 | 84 | 3517 | 82.57142857 | 21259.87584 | 507.77070530000003 | 0 | 88 | 531.9502627 | 0.0 | 5406 | 0.025 | 0.055999999999999994 | 0.076 | 0.17800000000000002 | 0.665 | . 821 Kentucky | Pike | 7/18/2020 | -88.0 | 12 | 143 | 3.285714286 | 2470.799641 | 207.33983 | 0 | 3 | 51.8349575 | 0.0 | 10901 | 0.096 | 0.08800000000000001 | 0.12300000000000001 | 0.14800000000000002 | 0.545 | . 961 Michigan | Calhoun | 7/18/2020 | -88.0 | 9 | 651 | 6.285714286 | 4852.451196 | 67.08457875 | 0 | 39 | 290.6998412 | 0.0 | 103126 | 0.063 | 0.121 | 0.078 | 0.17800000000000002 | 0.5589999999999999 | . 1101 Michigan | Kent | 7/18/2020 | 0.903989898 | 60 | 6270 | 69.28571429 | 9544.032696 | 91.33045642 | 1 | 147 | 223.7596182 | 1.5221742740000002 | 69872 | 0.019 | 0.061 | 0.063 | 0.215 | 0.6409999999999999 | . 1241 Minnesota | Hennepin | 7/18/2020 | 1.011980895 | 147 | 14495 | 166.71428569999998 | 11450.86713 | 116.12814540000001 | 3 | 801 | 632.7798945000001 | 2.369962152 | 21067 | 0.021 | 0.044000000000000004 | 0.096 | 0.243 | 0.596 | . 1381 Nebraska | Douglas | 7/18/2020 | 0.9920165959999999 | 31 | 8570 | 88.0 | 15000.166280000001 | 54.25964465 | 0 | 110 | 192.534223 | 0.0 | 1794 | 0.091 | 0.069 | 0.095 | 0.263 | 0.48200000000000004 | . 1521 New Jersey | Camden | 7/18/2020 | 0.770310458 | 27 | 7818 | 21.14285714 | 15436.224380000001 | 53.31006119 | 0 | 557 | 1099.766818 | 0.0 | 263670 | 0.027999999999999997 | 0.005 | 0.027000000000000003 | 0.13699999999999998 | 0.802 | . 1661 North Carolina | Wake | 7/18/2020 | 1.0214994659999999 | 274 | 8628 | 203.4285714 | 7760.660790000001 | 246.455848 | 3 | 89 | 80.05317690000001 | 2.6984216930000002 | 4016 | 0.015 | 0.02 | 0.07 | 0.168 | 0.727 | . 1801 Ohio | Hamilton | 7/18/2020 | 0.9053216740000001 | 117 | 7703 | 131.7142857 | 9422.941186 | 143.12399309999998 | 1 | 213 | 260.5590643 | 1.223281992 | 93649 | 0.069 | 0.055999999999999994 | 0.102 | 0.22399999999999998 | 0.5489999999999999 | . 1941 Pennsylvania | Montgomery | 7/18/2020 | 1.026656592 | 72 | 2939 | 71.28571429 | 5527.6882829999995 | 135.41801850000002 | 1 | 45 | 84.63626156 | 1.880805812 | 41172 | 0.040999999999999995 | 0.065 | 0.065 | 0.222 | 0.607 | . 2081 Ohio | Muskingan | 7/18/2020 | -88.0 | 3 | 118 | 2.5714285709999998 | 1368.671345 | 34.79672911 | 0 | 1 | 11.5989097 | 0.0 | 531687 | 0.136 | 0.145 | 0.121 | 0.182 | 0.41600000000000004 | . 2221 Pennsylvania | Lancaster | 7/18/2020 | 0.8635652340000001 | 31 | 5019 | 29.0 | 9196.956703 | 56.80527153 | 2 | 392 | 718.3118206 | 3.664856228 | 43425 | 0.037000000000000005 | 0.013000000000000001 | 0.054000000000000006 | 0.172 | 0.7240000000000001 | . 2361 Pennsylvania | Lycoming | 7/18/2020 | -88.0 | 1 | 264 | 3.428571429 | 2330.1176530000002 | 8.826203232000001 | 0 | 20 | 176.5240646 | 0.0 | 141793 | 0.062 | 0.057 | 0.06 | 0.207 | 0.614 | . 2501 Tennessee | Davidson | 7/18/2020 | -88.0 | 5 | 252 | 5.571428571 | 4163.912756000001 | 82.61731659 | 0 | 6 | 99.14077991 | 0.0 | 36004 | 0.096 | 0.09300000000000001 | 0.201 | 0.214 | 0.395 | . 2641 Tennessee | Fayette | 7/18/2020 | 1.33574939 | 21 | 454 | 12.28571429 | 11037.366590000001 | 510.53898330000004 | 0 | 7 | 170.1796611 | 0.0 | 20490 | 0.022000000000000002 | 0.001 | 0.08900000000000001 | 0.205 | 0.682 | . 2781 Tennessee | Shelby | 7/18/2020 | 1.2364051520000001 | 592 | 16224 | 400.14285710000007 | 17311.76761 | 631.6917174 | 6 | 241 | 257.1582836 | 6.402280919 | 22068 | 0.034 | 0.025 | 0.105 | 0.184 | 0.653 | .",
            "url": "https://richcastro82.github.io/Matrix/2020/08/06/General-Matrix-Data-Sources.html",
            "relUrl": "/2020/08/06/General-Matrix-Data-Sources.html",
            "date": " • Aug 6, 2020"
        }
        
    
  
    
        ,"post2": {
            "title": "KERRY MATRIX",
            "content": "#collapse #IMPORTS import pandas as pd from matplotlib import pyplot as plt rtData = pd.read_csv(&#39;https://d14wlfuexuxgcm.cloudfront.net/covid/rt.csv&#39;) dailyData = pd.read_csv(&#39;https://covidtracking.com/api/v1/states/daily.csv&#39;) #SET VARIABLES today = &#39;2020-08-02&#39; week = &#39;2020-08-02/2020-07-26&#39; dateRange = &#39;20200802&#39; #KERRY LOCATIONS AND POPULATION DATA kerryLocations = pd.read_csv(&#39;../kerry.csv&#39;) kerryLocations.columns = map(str.lower, kerryLocations.columns) kerryCols=[&#39;state&#39;, &#39;population&#39;] kerryLocs = kerryLocations[kerryCols] print (&#39;Kerry Locations Information being loaded...&#39;) kerryLocs . . Kerry Locations Information being loaded... . state population . 0 AL | 4903185 | . 1 AR | 3017804 | . 2 CA | 39512223 | . 3 FL | 21477737 | . 4 GA | 10617423 | . 5 IA | 3155070 | . 6 IL | 12671821 | . 7 IN | 6732219 | . 8 KS | 2913314 | . 9 MD | 6045680 | . 10 ME | 1344212 | . 11 MN | 5639632 | . 12 MO | 6137428 | . 13 MS | 2976149 | . 14 NJ | 8882190 | . 15 NY | 19453561 | . 16 OH | 11689100 | . 17 TN | 6829174 | . 18 TX | 28995881 | . 19 VA | 8535519 | . 20 WA | 7614893 | . 21 WI | 5822434 | . #collapse #rtlive data cleaning rtCleaned = rtData[rtData[&#39;date&#39;]==today] rtColumns = [&#39;date&#39;, &#39;region&#39;, &#39;mean&#39;] rtCleaned = rtCleaned[rtColumns] rtCleaned = rtCleaned.rename(columns = {&#39;region&#39;:&#39;state&#39;}) rtCleaned = rtCleaned.sort_values(&#39;state&#39;, ascending=True) . . #PRINT CLEANED DATA print (&#39;rtLive Data being loaded...&#39;) rtCleaned . rtLive Data being loaded... . date state mean . 7999 2020-08-02 | AK | 1.044038 | . 3674 2020-08-02 | AL | 1.038194 | . 4947 2020-08-02 | AR | 1.032027 | . 7165 2020-08-02 | AZ | 0.868990 | . 7844 2020-08-02 | CA | 0.887025 | . 6379 2020-08-02 | CO | 0.998260 | . 952 2020-08-02 | CT | 0.981955 | . 2076 2020-08-02 | DC | 1.038579 | . 1594 2020-08-02 | DE | 0.946947 | . 2723 2020-08-02 | FL | 0.963125 | . 2560 2020-08-02 | GA | 0.951249 | . 8158 2020-08-02 | HI | 1.344259 | . 4631 2020-08-02 | IA | 0.987130 | . 6845 2020-08-02 | ID | 1.008629 | . 3997 2020-08-02 | IL | 1.079792 | . 3353 2020-08-02 | IN | 1.003324 | . 5740 2020-08-02 | KS | 1.064063 | . 2884 2020-08-02 | KY | 1.051189 | . 5106 2020-08-02 | LA | 0.911052 | . 629 2020-08-02 | MA | 1.045733 | . 1756 2020-08-02 | MD | 1.031470 | . 153 2020-08-02 | ME | 0.935425 | . 3519 2020-08-02 | MI | 0.990569 | . 4316 2020-08-02 | MN | 1.104105 | . 4791 2020-08-02 | MO | 1.162356 | . 4472 2020-08-02 | MS | 1.070742 | . 6691 2020-08-02 | MT | 1.044862 | . 2238 2020-08-02 | NC | 1.014149 | . 5262 2020-08-02 | ND | 1.091882 | . 5580 2020-08-02 | NE | 1.109083 | . 313 2020-08-02 | NH | 1.012778 | . 1276 2020-08-02 | NJ | 0.973840 | . 6217 2020-08-02 | NM | 0.926463 | . 7682 2020-08-02 | NV | 1.090898 | . 1115 2020-08-02 | NY | 0.962816 | . 3193 2020-08-02 | OH | 0.941024 | . 5898 2020-08-02 | OK | 0.995248 | . 7525 2020-08-02 | OR | 1.072128 | . 1437 2020-08-02 | PA | 0.977182 | . 792 2020-08-02 | RI | 1.141209 | . 2399 2020-08-02 | SC | 0.905029 | . 5419 2020-08-02 | SD | 1.119219 | . 3834 2020-08-02 | TN | 0.984245 | . 6060 2020-08-02 | TX | 0.956087 | . 7003 2020-08-02 | UT | 1.014811 | . 1916 2020-08-02 | VA | 1.095967 | . 474 2020-08-02 | VT | 0.838499 | . 7364 2020-08-02 | WA | 1.089897 | . 4155 2020-08-02 | WI | 0.917461 | . 3034 2020-08-02 | WV | 0.951932 | . 6535 2020-08-02 | WY | 1.006348 | . #collapse #DAILY DATA CLEANING dailyColumns = [&#39;date&#39;, &#39;state&#39;, &#39;death&#39;, &#39;positiveIncrease&#39;, &#39;totalTestResultsIncrease&#39;, &#39;deathIncrease&#39;] dailyData = dailyData[dailyColumns] dailyData = dailyData.sort_values(&#39;state&#39;, ascending=True) dailyCleaned = dailyData[dailyData[&#39;date&#39;].astype(str)==dateRange] dailyCleaned . . date state death positiveIncrease totalTestResultsIncrease deathIncrease . 168 20200802 | AK | 24.0 | 157 | 4457 | 0 | . 169 20200802 | AL | 1627.0 | 2095 | 8699 | 24 | . 170 20200802 | AR | 458.0 | 0 | 0 | -2 | . 171 20200802 | AS | 0.0 | 0 | 0 | 0 | . 172 20200802 | AZ | 3765.0 | 1465 | 7778 | 18 | . 173 20200802 | CA | 9356.0 | 9032 | 149388 | 132 | . 174 20200802 | CO | 1691.0 | 458 | 7169 | 0 | . 175 20200802 | CT | 4432.0 | 0 | 0 | 0 | . 176 20200802 | DC | 586.0 | 69 | 3411 | 1 | . 177 20200802 | DE | 585.0 | 72 | 2015 | 0 | . 178 20200802 | FL | 7206.0 | 7104 | 41554 | 62 | . 179 20200802 | GA | 3840.0 | 3165 | 28555 | 15 | . 180 20200802 | GU | 5.0 | 0 | 0 | 0 | . 181 20200802 | HI | 26.0 | 86 | 3390 | 0 | . 182 20200802 | IA | 876.0 | 516 | 5148 | 4 | . 183 20200802 | ID | 197.0 | 393 | 2426 | 8 | . 184 20200802 | IL | 7714.0 | 1467 | 38945 | 14 | . 185 20200802 | IN | 2975.0 | 735 | 10437 | 4 | . 186 20200802 | KS | 358.0 | 0 | 0 | 0 | . 187 20200802 | KY | 742.0 | 462 | 462 | 2 | . 188 20200802 | LA | 4007.0 | 3467 | 37197 | 58 | . 189 20200802 | MA | 8638.0 | 418 | 13377 | 12 | . 190 20200802 | MD | 3515.0 | 909 | 15432 | 9 | . 191 20200802 | ME | 123.0 | 21 | 2328 | 0 | . 192 20200802 | MI | 6457.0 | 429 | 25011 | 0 | . 193 20200802 | MN | 1654.0 | 759 | 12073 | 8 | . 194 20200802 | MO | 1253.0 | 582 | 5722 | 0 | . 195 20200802 | MP | 2.0 | 3 | 3 | 0 | . 196 20200802 | MS | 1703.0 | 672 | 672 | 10 | . 197 20200802 | MT | 61.0 | 112 | 2742 | 0 | . 198 20200802 | NC | 1969.0 | 1341 | 27098 | 5 | . 199 20200802 | ND | 95.0 | 0 | 0 | 0 | . 200 20200802 | NE | 332.0 | 180 | 1984 | 0 | . 201 20200802 | NH | 416.0 | 0 | 0 | 0 | . 202 20200802 | NJ | 15836.0 | 321 | 49180 | 6 | . 203 20200802 | NM | 651.0 | 196 | 7874 | 9 | . 204 20200802 | NV | 832.0 | 1131 | 7899 | 0 | . 205 20200802 | NY | 25170.0 | 531 | 58961 | 6 | . 206 20200802 | OH | 3529.0 | 944 | 24643 | 14 | . 207 20200802 | OK | 550.0 | 494 | 494 | 1 | . 208 20200802 | OR | 326.0 | 280 | 4041 | 1 | . 209 20200802 | PA | 7209.0 | 654 | 12247 | 5 | . 210 20200802 | PR | 230.0 | 539 | 539 | 5 | . 211 20200802 | RI | 1007.0 | 0 | 0 | 0 | . 212 20200802 | SC | 1777.0 | 1189 | 10388 | 26 | . 213 20200802 | SD | 135.0 | 88 | 1021 | 1 | . 214 20200802 | TN | 1073.0 | 1443 | 19445 | 6 | . 215 20200802 | TX | 6837.0 | 0 | 0 | 0 | . 216 20200802 | UT | 311.0 | 473 | 3456 | 1 | . 217 20200802 | VA | 2218.0 | 981 | 12665 | 3 | . 218 20200802 | VI | 8.0 | 0 | 0 | 0 | . 219 20200802 | VT | 57.0 | 5 | 1289 | 0 | . 220 20200802 | WA | 1592.0 | 1738 | 27874 | 28 | . 221 20200802 | WI | 955.0 | 932 | 9653 | 1 | . 222 20200802 | WV | 117.0 | 119 | 3988 | 1 | . 223 20200802 | WY | 26.0 | 39 | 39 | 0 | . #collapse #FILTER DATASETS TO KERRY LOCATIONS AND MERGE SETS INTO ONE TABLE startFile=pd.merge(kerryLocs, rtCleaned, on=[&#39;state&#39;]) print (&#39;Kerry File Building...&#39;) newData=pd.merge(startFile, dailyCleaned, on=[&#39;state&#39;]) newData=newData.rename(columns={&#39;date_x&#39;:&#39;date&#39;}) colss = [&#39;date&#39;, &#39;state&#39;, &#39;population&#39;, &#39;mean&#39;, &#39;death&#39;, &#39;positiveIncrease&#39;, &#39;totalTestResultsIncrease&#39;, &#39;deathIncrease&#39;] newData[colss].head(50) . . Kerry File Building... . date state population mean death positiveIncrease totalTestResultsIncrease deathIncrease . 0 2020-08-02 | AL | 4903185 | 1.038194 | 1627.0 | 2095 | 8699 | 24 | . 1 2020-08-02 | AR | 3017804 | 1.032027 | 458.0 | 0 | 0 | -2 | . 2 2020-08-02 | CA | 39512223 | 0.887025 | 9356.0 | 9032 | 149388 | 132 | . 3 2020-08-02 | FL | 21477737 | 0.963125 | 7206.0 | 7104 | 41554 | 62 | . 4 2020-08-02 | GA | 10617423 | 0.951249 | 3840.0 | 3165 | 28555 | 15 | . 5 2020-08-02 | IA | 3155070 | 0.987130 | 876.0 | 516 | 5148 | 4 | . 6 2020-08-02 | IL | 12671821 | 1.079792 | 7714.0 | 1467 | 38945 | 14 | . 7 2020-08-02 | IN | 6732219 | 1.003324 | 2975.0 | 735 | 10437 | 4 | . 8 2020-08-02 | KS | 2913314 | 1.064063 | 358.0 | 0 | 0 | 0 | . 9 2020-08-02 | MD | 6045680 | 1.031470 | 3515.0 | 909 | 15432 | 9 | . 10 2020-08-02 | ME | 1344212 | 0.935425 | 123.0 | 21 | 2328 | 0 | . 11 2020-08-02 | MN | 5639632 | 1.104105 | 1654.0 | 759 | 12073 | 8 | . 12 2020-08-02 | MO | 6137428 | 1.162356 | 1253.0 | 582 | 5722 | 0 | . 13 2020-08-02 | MS | 2976149 | 1.070742 | 1703.0 | 672 | 672 | 10 | . 14 2020-08-02 | NJ | 8882190 | 0.973840 | 15836.0 | 321 | 49180 | 6 | . 15 2020-08-02 | NY | 19453561 | 0.962816 | 25170.0 | 531 | 58961 | 6 | . 16 2020-08-02 | OH | 11689100 | 0.941024 | 3529.0 | 944 | 24643 | 14 | . 17 2020-08-02 | TN | 6829174 | 0.984245 | 1073.0 | 1443 | 19445 | 6 | . 18 2020-08-02 | TX | 28995881 | 0.956087 | 6837.0 | 0 | 0 | 0 | . 19 2020-08-02 | VA | 8535519 | 1.095967 | 2218.0 | 981 | 12665 | 3 | . 20 2020-08-02 | WA | 7614893 | 1.089897 | 1592.0 | 1738 | 27874 | 28 | . 21 2020-08-02 | WI | 5822434 | 0.917461 | 955.0 | 932 | 9653 | 1 | . #collapse read = pd.read_csv(&#39;../us_m.csv&#39;) read=read.rename(columns={&#39;State&#39;:&#39;state&#39;}) filler=[&#39;state&#39;,&#39;Social Index Current&#39;, &#39;Change in SD index&#39;, &#39;SD Past&#39;, &#39;Rt Current&#39;, &#39;Rt Past&#39;, &#39;Change in Rt&#39;, &#39;Stratified Rt&#39;, &#39;tests per case&#39;, &#39;Test Increase Current&#39;, &#39;Change in Pos Test Increase&#39;, &#39;Increase in Pos Tests Past&#39;, &#39;Per Capita Positive Tests (July 07 - July 13) per 100K&#39;, &#39;TPR Current&#39;, &#39;Change in Test Positive Rate&#39;, &#39;TPR Past&#39;, &#39;Stratified Test Positive Rate&#39;, &#39;Outbreak Index&#39;, &#39;Weekly Deaths Current&#39;, &#39;Change in Weekly Deaths&#39;, &#39;Weekly Deaths Past&#39;, &#39;Weekly Death Rate per 100K Population&#39;, &#39;Total Deaths Current&#39;, &#39;Change in Total Deaths&#39;, &#39;Total Deaths Past&#39;, &#39;Cumulative Death Rate per 100K&#39;, &#39;Total Tests Current&#39;, &#39;Change in Total Tests&#39;, &#39;Total Tests Past&#39;, &#39;Tests per 100K Population&#39;] read=read[filler] readMerge=pd.merge(read, newData, on=&#39;state&#39;) readMerge.head(50) . . state Social Index Current Change in SD index SD Past Rt Current Rt Past Change in Rt Stratified Rt tests per case Test Increase Current ... Total Tests Past Tests per 100K Population population date mean date_y death positiveIncrease totalTestResultsIncrease deathIncrease . 0 AL | 22 | -7 | 29 | 1.111944 | 1.111944 | 0 | #REF! | 14.889303 | 11546 | ... | 56092 | 1144 | 4903185 | 2020-08-02 | 1.038194 | 20200802 | 1627.0 | 2095 | 8699 | 24 | . 1 AR | 76 | 50 | 26 | 1.037065 | 1.037065 | 0 | #REF! | 32.629213 | 5150 | ... | 42509 | 1409 | 3017804 | 2020-08-02 | 1.032027 | 20200802 | 458.0 | 0 | 0 | -2 | . 2 CA | 22 | -15 | 37 | 0.970088 | 0.970088 | 0 | #REF! | 18.597675 | 54351 | ... | 888118 | 2248 | 39512223 | 2020-08-02 | 0.887025 | 20200802 | 9356.0 | 9032 | 149388 | 132 | . 3 FL | 85 | 51 | 34 | 0.986019 | 0.986019 | 0 | #REF! | 21.515181 | 59137 | ... | 321301 | 1496 | 21477737 | 2020-08-02 | 0.963125 | 20200802 | 7206.0 | 7104 | 41554 | 62 | . 4 GA | 22 | -8 | 30 | 0.953783 | 0.953783 | 0 | #REF! | 12.918055 | 24592 | ... | 193438 | 1822 | 10617423 | 2020-08-02 | 0.951249 | 20200802 | 3840.0 | 3165 | 28555 | 15 | . 5 IA | 16 | -9 | 25 | 1.010162 | 1.010162 | 0 | #REF! | 6.070516 | 3287 | ... | 31630 | 1003 | 3155070 | 2020-08-02 | 0.987130 | 20200802 | 876.0 | 516 | 5148 | 4 | . 6 IL | 44 | 17 | 27 | 1.092876 | 1.092876 | 0 | #REF! | 6.080535 | 10625 | ... | 264702 | 2089 | 12671821 | 2020-08-02 | 1.079792 | 20200802 | 7714.0 | 1467 | 38945 | 14 | . 7 IN | 54 | 29 | 25 | 1.001587 | 1.001587 | 0 | #REF! | 6.380463 | 5526 | ... | 67691 | 1005 | 6732219 | 2020-08-02 | 1.003324 | 20200802 | 2975.0 | 735 | 10437 | 4 | . 8 KS | 46 | 19 | 27 | 1.071201 | 1.071201 | 0 | #REF! | 6.923400 | 2704 | ... | 22903 | 786 | 2913314 | 2020-08-02 | 1.064063 | 20200802 | 358.0 | 0 | 0 | 0 | . 9 MD | 45 | 12 | 33 | 1.047616 | 1.047616 | 0 | #REF! | 4.486504 | 6268 | ... | 105119 | 1739 | 6045680 | 2020-08-02 | 1.031470 | 20200802 | 3515.0 | 909 | 15432 | 9 | . 10 ME | 45 | 21 | 24 | 0.975832 | 0.975832 | 0 | #REF! | 11.834043 | 138 | ... | 16704 | 1243 | 1344212 | 2020-08-02 | 0.935425 | 20200802 | 123.0 | 21 | 2328 | 0 | . 11 MN | 45 | 16 | 29 | 1.074376 | 1.074376 | 0 | #REF! | 6.418775 | 4757 | ... | -98722 | -1751 | 5639632 | 2020-08-02 | 1.104105 | 20200802 | 1654.0 | 759 | 12073 | 8 | . 12 MO | 1 | -25 | 26 | 1.220294 | 1.220294 | 0 | #REF! | 12.892074 | 9837 | ... | 71044 | 1158 | 6137428 | 2020-08-02 | 1.162356 | 20200802 | 1253.0 | 582 | 5722 | 0 | . 13 MS | 13 | -17 | 30 | 1.061724 | 1.061724 | 0 | #REF! | 7.721539 | 8168 | ... | 35120 | 1180 | 2976149 | 2020-08-02 | 1.070742 | 20200802 | 1703.0 | 672 | 672 | 10 | . 14 NJ | 15 | -17 | 32 | 0.965851 | 0.965851 | 0 | #REF! | 2.986051 | 2802 | ... | 180739 | 2035 | 8882190 | 2020-08-02 | 0.973840 | 20200802 | 15836.0 | 321 | 49180 | 6 | . 15 NY | 52 | 13 | 39 | 0.941746 | 0.941746 | 0 | #REF! | 8.131632 | 4499 | ... | 455625 | 2342 | 19453561 | 2020-08-02 | 0.962816 | 20200802 | 25170.0 | 531 | 58961 | 6 | . 16 OH | 64 | 38 | 26 | 0.918456 | 0.918456 | 0 | #REF! | 10.275097 | 8786 | ... | 191445 | 1638 | 11689100 | 2020-08-02 | 0.941024 | 20200802 | 3529.0 | 944 | 24643 | 14 | . 17 TN | 15 | -11 | 26 | 0.980140 | 0.980140 | 0 | #REF! | 17.465635 | 14147 | ... | 163081 | 2388 | 6829174 | 2020-08-02 | 0.984245 | 20200802 | 1073.0 | 1443 | 19445 | 6 | . 18 TX | 35 | -1 | 36 | 0.933380 | 0.933380 | 0 | #REF! | 17.097357 | 56091 | ... | 405704 | 1399 | 28995881 | 2020-08-02 | 0.956087 | 20200802 | 6837.0 | 0 | 0 | 0 | . 19 VA | 85 | 55 | 30 | 1.023291 | 1.023291 | 0 | #REF! | 5.528127 | 7034 | ... | 115897 | 1358 | 8535519 | 2020-08-02 | 1.095967 | 20200802 | 2218.0 | 981 | 12665 | 3 | . 20 WA | 25 | -5 | 30 | 1.012360 | 1.012360 | 0 | #REF! | 20.170572 | 5538 | ... | 88933 | 1168 | 7614893 | 2020-08-02 | 1.089897 | 20200802 | 1592.0 | 1738 | 27874 | 28 | . 21 WI | 26 | 0 | 26 | 0.985503 | 0.985503 | 0 | #REF! | 11.013130 | 6120 | ... | 93650 | 1608 | 5822434 | 2020-08-02 | 0.917461 | 20200802 | 955.0 | 932 | 9653 | 1 | . 22 rows × 38 columns . #collapse #chart over time fig, ax = plt.subplots(figsize=(10,5)) dailyData.death.plot(c=&quot;g&quot;, label=&quot;Test-adjusted&quot;) dailyData.positiveIncrease.plot(c=&quot;g&quot;, alpha=.5, label=&quot;Test-adjusted (raw)&quot;, style=&quot;--&quot;) dailyData.deathIncrease.plot(c=&quot;b&quot;, label=&quot;Infections&quot;) fig.set_facecolor(&#39;w&#39;) ax.legend(); . .",
            "url": "https://richcastro82.github.io/Matrix/jupyter/2020/08/05/USM.html",
            "relUrl": "/jupyter/2020/08/05/USM.html",
            "date": " • Aug 5, 2020"
        }
        
    
  
    
        ,"post3": {
            "title": "Title",
            "content": "toc: false | comments: true | image: images/US_case_count.png | hide: false | search_exclude: false | categories: geospatial | author: Shantam Raj | badges: true | . import geopandas as gpd import altair as alt import pandas as pd alt.renderers.set_embed_options(actions=False) # Shapefiles from us census state_shpfile = &#39;./shapes/cb_2019_us_state_20m&#39; county_shpfile = &#39;./shapes/cb_2019_us_county_20m&#39; states = gpd.read_file(state_shpfile) county = gpd.read_file(county_shpfile) # Adding longitude and latitude in state data states[&#39;lon&#39;] = states[&#39;geometry&#39;].centroid.x states[&#39;lat&#39;] = states[&#39;geometry&#39;].centroid.y # Adding longitude and latitude in state data county[&#39;lon&#39;] = county[&#39;geometry&#39;].centroid.x county[&#39;lat&#39;] = county[&#39;geometry&#39;].centroid.y . CPLE_OpenFailedError Traceback (most recent call last) fiona/_shim.pyx in fiona._shim.gdal_open_vector() fiona/_err.pyx in fiona._err.exc_wrap_pointer() CPLE_OpenFailedError: ./shapes/cb_2019_us_state_20m: No such file or directory During handling of the above exception, another exception occurred: DriverError Traceback (most recent call last) &lt;ipython-input-2-174081889491&gt; in &lt;module&gt; 7 state_shpfile = &#39;./shapes/cb_2019_us_state_20m&#39; 8 county_shpfile = &#39;./shapes/cb_2019_us_county_20m&#39; -&gt; 9 states = gpd.read_file(state_shpfile) 10 county = gpd.read_file(county_shpfile) 11 C: Users anaconda3 envs USAcovidMAP lib site-packages geopandas io file.py in _read_file(filename, bbox, mask, rows, **kwargs) 94 95 with fiona_env(): &gt; 96 with reader(path_or_bytes, **kwargs) as features: 97 98 # In a future Fiona release the crs attribute of features will C: Users anaconda3 envs USAcovidMAP lib site-packages fiona env.py in wrapper(*args, **kwargs) 396 def wrapper(*args, **kwargs): 397 if local._env: --&gt; 398 return f(*args, **kwargs) 399 else: 400 if isinstance(args[0], str): C: Users anaconda3 envs USAcovidMAP lib site-packages fiona __init__.py in open(fp, mode, driver, schema, crs, encoding, layer, vfs, enabled_drivers, crs_wkt, **kwargs) 251 252 if mode in (&#39;a&#39;, &#39;r&#39;): --&gt; 253 c = Collection(path, mode, driver=driver, encoding=encoding, 254 layer=layer, enabled_drivers=enabled_drivers, **kwargs) 255 elif mode == &#39;w&#39;: C: Users anaconda3 envs USAcovidMAP lib site-packages fiona collection.py in __init__(self, path, mode, driver, schema, crs, encoding, layer, vsi, archive, enabled_drivers, crs_wkt, ignore_fields, ignore_geometry, **kwargs) 152 if self.mode == &#39;r&#39;: 153 self.session = Session() --&gt; 154 self.session.start(self, **kwargs) 155 elif self.mode in (&#39;a&#39;, &#39;w&#39;): 156 self.session = WritingSession() fiona/ogrext.pyx in fiona.ogrext.Session.start() fiona/_shim.pyx in fiona._shim.gdal_open_vector() DriverError: ./shapes/cb_2019_us_state_20m: No such file or directory . # NYT dataset county_url = &#39;https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv&#39; cdf = pd.read_csv(county_url) . cdf[cdf[&#39;fips&#39;].isnull() == True].groupby([&#39;county&#39;]).sum() . #hide_output cdf[cdf[&#39;fips&#39;].isnull() == True].groupby([&#39;county&#39;, &#39;state&#39;]).sum() . NYT publishes the data for New York City in a different way by combining the results of the 5 boroughs that comprise it. So we will combine them too and add a new row in the dataset with a custom fips of 1. Let&#39;s start by making this change in the raw NYT dataset itself. . cdf.loc[cdf[&#39;county&#39;] == &#39;New York City&#39;,&#39;fips&#39;] = 1 cdf[cdf[&#39;county&#39;] == &#39;New York City&#39;] . # collapse latest_cases = cdf.groupby(&#39;fips&#39;, as_index=False).agg({&#39;county&#39;: &#39;last&#39;, &#39;date&#39;: &#39;last&#39;, &#39;state&#39;: &#39;last&#39;, &#39;cases&#39;: &#39;last&#39;, &#39;deaths&#39;: &#39;last&#39;}) latest_cases . . Now we have to make the changes in our shapefile too. For that we need to **dissolve** the 5 buroughs into one single geospatial entity. . #New York City fips = 36005&#39;, &#39;36047&#39;, &#39;36061&#39;, &#39;36081&#39;, &#39;36085 which corresponds to New York, Kings, Queens, Bronx and Richmond spatial_nyc = county[county[&#39;GEOID&#39;].isin([&#39;36005&#39;, &#39;36047&#39;, &#39;36061&#39;, &#39;36081&#39;, &#39;36085&#39;])] . combined_nyc = spatial_nyc.dissolve(by=&#39;STATEFP&#39;) alt.Chart(spatial_nyc).mark_geoshape(stroke=&#39;white&#39;, strokeWidth=3).encode() | alt.Chart(combined_nyc).mark_geoshape(stroke=&#39;white&#39;, strokeWidth=3).encode() . agg_nyc_data = spatial_nyc.dissolve(by=&#39;STATEFP&#39;).reset_index() agg_nyc_data[&#39;GEOID&#39;] = &#39;1&#39; agg_nyc_data[&#39;fips&#39;] = 1 agg_nyc_data[&#39;lon&#39;] = agg_nyc_data[&#39;geometry&#39;].centroid.x agg_nyc_data[&#39;lat&#39;] = agg_nyc_data[&#39;geometry&#39;].centroid.y . agg_nyc_data . # hide_output county_nyc = gpd.GeoDataFrame(pd.concat([county, agg_nyc_data], ignore_index=True)) county_nyc[&#39;fips&#39;] = county_nyc[&#39;GEOID&#39;] county_nyc[&#39;fips&#39;] = county_nyc[&#39;fips&#39;].astype(&#39;int&#39;) county_nyc # generate FIPS in the shapefile itself by combining STATEFP and COUNTYFP #county2[&#39;STATEFP&#39;] + county2[&#39;COUNTYFP&#39;] #latest_cases[&#39;fips&#39;] = latest_cases[&#39;fips&#39;].astype(&#39;int&#39;) . latest_cases[&#39;fips&#39;].isin(county_nyc[&#39;fips&#39;]).value_counts() . latest_cases[latest_cases[&#39;county&#39;] == &#39;New York City&#39;] . county_nyc[county_nyc[&#39;fips&#39;] == 1] . # collapse latest_cases_w_fips = county_nyc.merge(latest_cases, how=&#39;left&#39;, on=&#39;fips&#39;) circle_selection = alt.selection_single(on=&#39;mouseover&#39;, empty=&#39;none&#39;) circles = alt.Chart(latest_cases_w_fips).mark_point(fillOpacity=0.2, fill=&#39;red&#39;, strokeOpacity=1, color=&#39;red&#39;, strokeWidth=1).encode( latitude=&quot;lat:Q&quot;, longitude=&quot;lon:Q&quot;, size=alt.Size(&#39;cases:Q&#39;, scale=alt.Scale(domain=[0, 7000],),legend=alt.Legend(title=&quot;Cases&quot;)), tooltip=[&#39;county:N&#39;, &#39;cases:Q&#39;, &#39;deaths:Q&#39;], color = alt.condition(circle_selection, alt.value(&#39;black&#39;), alt.value(&#39;red&#39;)) ).project( type=&#39;albersUsa&#39; ).properties( width=1000, height=700 ).add_selection( circle_selection ) state = alt.Chart(states).mark_geoshape(fill=&#39;#ededed&#39;, stroke=&#39;white&#39;).encode( ).project( type=&#39;albersUsa&#39; ) state_text = state.mark_text().transform_filter(alt.datum.NAME != &#39;Puerto Rico&#39;).encode( longitude=&#39;lon:Q&#39;, latitude=&#39;lat:Q&#39;, text=&#39;NAME&#39;, ).project( type=&#39;albersUsa&#39; ) . . test= alt.Chart(source).mark_image( width=50, height=50 ).encode( x=&#39;20&#39;, y=&#39;20&#39;, url=&#39;../dp.jpg&#39; ) . (state+circles+state_text).configure_view(strokeWidth=0) .",
            "url": "https://richcastro82.github.io/Matrix/2020/06/12/US-case-counts-geospatial.html",
            "relUrl": "/2020/06/12/US-case-counts-geospatial.html",
            "date": " • Jun 12, 2020"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "About Me",
          "content": "This is where you put the contents of your About page. Like all your pages, it’s in Markdown format. . This website is powered by fastpages 1. . a blogging platform that natively supports Jupyter notebooks in addition to other formats. &#8617; . |",
          "url": "https://richcastro82.github.io/Matrix/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
  

  

  
  

  

  
  

  
  

  
  

  
      ,"page10": {
          "title": "",
          "content": "Sitemap: {{ “sitemap.xml” | absolute_url }} | .",
          "url": "https://richcastro82.github.io/Matrix/robots.txt",
          "relUrl": "/robots.txt",
          "date": ""
      }
      
  

}